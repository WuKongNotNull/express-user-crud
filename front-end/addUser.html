<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>添加用户界面</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.0.1/css/bootstrap-theme.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.0.1/css/bootstrap.css" rel="stylesheet">
</head>
<body>
<div class="container">
    <div class="row clearfix">
        <div class="col-md-12 column">
            <h2>
                添加用户界面
            </h2>
        </div>
    </div>
    <div class="row clearfix">
        <div class="col-md-12 column">

            <form role="form">
                <div class="form-group">
                    <label for="exampleInputUsername">用户账号</label>
                    <input name="username" type="text" class="form-control" id="exampleInputUsername"/>
                </div>
                <div class="form-group">
                    <label for="exampleInputNickname">昵称</label>
                    <input  name="nickname" type="text" class="form-control" id="exampleInputNickname"/>
                </div>
                <div class="form-group">
                    <label for="exampleInputEmail">邮箱</label>
                    <input name="email" type="email" class="form-control" id="exampleInputEmail"/>
                </div>

                <button  class="btn btn-primary">添加用户</button>
            </form>

        </div>
    </div>
</div>

<!--引入 jquery -->
<script src="https://code.jquery.com/jquery-3.6.0.js" type="text/javascript"></script>
<script type="text/javascript">
    $("button").on('click', () => {
       const user = $("form").serialize()
       //console.log(user);
      //  alert(user) axios
        // 根据表单中的数据，传递到后端服务器，执行添加用户功能
        $.ajax({
            method: 'post',
            url: 'http://localhost:3000/api/admin/users',
            data: user, // 传递到后端服务器的数据
            async: false,
            success: (res) => {
               // alert(JSON.stringify(res))
                if(res.code === 1 ){
                  return   window.open('index.html')
                }
                window.open('addUser.html')
                alert('添加用户失败，请重新再试')
            },
            error: (err) => {
                console.log(err);
            }


        })
    })
</script>
</body>
</html>